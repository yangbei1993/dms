# 消费重置<a name="zh-cn_topic_0067021575"></a>

## 操作场景<a name="section371635610585"></a>

如果想跳过某些未消费的消息，或者想重新消费队列中的已消费的消息，或者只想消费某个时间点之后的消息（这些消息不论之前是否消费过），那么可以通过“消费重置”功能实现选择性跳过或者重新消费。

消费重置支持以下三种场景：

-   消费位置重置到最前：

    重新消费队列中的所有的消息，不论之前是否已消费过。

-   消费位置重置到最后：

    跳过队列中当前所有的消息，只消费“重置”之后新生产的消息。

-   自定义重置位置：

    只消费队列中某一时间点之后的消息。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >如果执行了消费重置，则重置位置之前的消息都变成已消费消息数，不管重置之前是否已消费。  


## 前提条件<a name="section164005292211"></a>

已创建队列和消费组，且消费组已消费消息。

## 操作步骤<a name="section2885144910119"></a>

1.  登录管理控制台。
2.  在管理控制台左上角单击![](figures/icon-region.png)，选择区域。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >此处请选择与租户的应用服务相同的区域。  

3.  单击页面上方的“服务列表”，选择“应用服务 \> 分布式消息服务”，进入分布式消息服务信息页面。
4.  单击左侧菜单栏的“队列管理”，进入“队列管理”页面。
5.  单击指定队列的名称，显示队列详情。
6.  选择“消费组”，显示消费组列表。
7.  单击消费组后的“更多”，选择“消费重置”，进入“消费重置”页面。
8.  选择“重置位置”、是否强制重置，单击“确定”，执行重置消费位置。

    **表 1**  消费消息参数说明

    <a name="table1824124113333"></a>
    <table><thead align="left"><tr id="row8824184163315"><th class="cellrowborder" valign="top" width="17%" id="mcps1.2.3.1.1"><p id="p082474183310"><a name="p082474183310"></a><a name="p082474183310"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="83%" id="mcps1.2.3.1.2"><p id="p1482564113339"><a name="p1482564113339"></a><a name="p1482564113339"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row782574173311"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.3.1.1 "><p id="p6825641133319"><a name="p6825641133319"></a><a name="p6825641133319"></a>重置位置</p>
    </td>
    <td class="cellrowborder" valign="top" width="83%" headers="mcps1.2.3.1.2 "><a name="ul20566145816241"></a><a name="ul20566145816241"></a><ul id="ul20566145816241"><li>从队列头端消费消息：重置成功后，该消费组从队列的最头端开始消费。</li><li>自定义时间消费消息：重置成功后，该消费组只能消费重置时间点之后的消息。</li><li>从队列尾端消费消息：重置成功后，该消费组只能消费队列中新生产的消息。</li></ul>
    <p id="p184829531892"><a name="p184829531892"></a><a name="p184829531892"></a>默认为从队列头端消费消息。</p>
    </td>
    </tr>
    <tr id="row282524153316"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.3.1.1 "><p id="p19825144111333"><a name="p19825144111333"></a><a name="p19825144111333"></a>自定义时间</p>
    </td>
    <td class="cellrowborder" valign="top" width="83%" headers="mcps1.2.3.1.2 "><p id="p532743303420"><a name="p532743303420"></a><a name="p532743303420"></a>当重置位置选择“自定义时间消费消息”时，需要设置自定义时间，并且只能选择72小时范围内的时间。</p>
    </td>
    </tr>
    <tr id="row1982594111337"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.3.1.1 "><p id="p20825241183318"><a name="p20825241183318"></a><a name="p20825241183318"></a>强制重置</p>
    </td>
    <td class="cellrowborder" valign="top" width="83%" headers="mcps1.2.3.1.2 "><p id="p16323193318340"><a name="p16323193318340"></a><a name="p16323193318340"></a>关闭：重置时如果消费组正在消费消息，则重置会失败。</p>
    <p id="p1080320816451"><a name="p1080320816451"></a><a name="p1080320816451"></a>打开：强制进行消费重置，如果消费组正在消费消息，则可能会消费失败。</p>
    <p id="p4265320194517"><a name="p4265320194517"></a><a name="p4265320194517"></a>默认为关闭。</p>
    </td>
    </tr>
    </tbody>
    </table>


